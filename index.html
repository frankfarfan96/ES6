<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>ES6 Modules</title>
</head>

<body>
    <script type="module">
        // Importo una funzione all'interno di un modulo ES6 esterno
        import {callAdd, callSub, callMolt, callDiv, addItem, removeItem, addImg, removeImg, cercaF} from "./js/main-module.js";
        import {carica} from "./js/Lista.js";
        // Per rendere accessibile la funzione importata (callAdd) al di fuori del modulo (module scope)
        // occorre renderla globale (Global) assegnandola all'oggetto window.
        window.callAdd=callAdd;
        window.callSub=callSub;
        window.callMolt=callMolt;
        window.callDiv=callDiv;
        window.addItem = addItem;
        window.removeItem = removeItem;
        window.addImg = addImg;
        window.removeImg = removeImg;
        window.carica = carica;
        window.cercaF = cercaF;
    </script>
    <script>
        /*
        Funzione collegata all'evento onClick
        */
        function calcolasom() {
            // Per recuperare i due valori rispettivamente nelle INPUT "a" e "b" accedo al DOM
            // con uno dei metodi disponibili (in questo caso getElementById). I tag INPUT hanno la proprietà
            // "value" che contiene il valore digitato dall'utente.
            const a=document.getElementById('a').value;
            const b=document.getElementById('b').value;

            // Chiamo la funzione "callAdd" importata dal modulo e intercetto il suo risultato.
            const result=window.callAdd(a,b);

            // Inserisco dinamicamente il valore all'interno del DOM.
            // Cerco con il metodo getElementById il tag SPAN che dovrà visualizzare il risultato attraverso il suo ID.
            // Ogni tag del DOM ha una proprietà "innerHTML" che mi permette di includere dinamicamente all'interno 
            // dell'HTML dei valori via Javascript (nel nostro caso il valore della variabile "result")
      
            if (isNaN(a) || isNaN(b)) {
                document.getElementById('valore').innerHTML="ERROR: devi inserire valori numerici";
            } else {
                document.getElementById('valore').innerHTML=result;
            }      
        }

        function calcoladif() {
         
            const a=document.getElementById('a').value;
            const b=document.getElementById('b').value;
            const result=window.callSub(a,b);
            if (isNaN(a) || isNaN(b)) {
                document.getElementById('valore').innerHTML="ERROR: devi inserire valori numerici";
            } else {
                document.getElementById('valore').innerHTML=result;
            }     
        }

        function calcolamolt() {
         
         const a=document.getElementById('a').value;
         const b=document.getElementById('b').value;
         const result=window.callMolt(a,b);
         if (isNaN(a) || isNaN(b)) {
             document.getElementById('valore').innerHTML="ERROR: devi inserire valori numerici";
         } else {
             document.getElementById('valore').innerHTML=result;
         }     
     }

     function calcoladiv() {
         
         const a=document.getElementById('a').value;
         const b=document.getElementById('b').value;
         const result=window.callDiv(a,b);
         if (isNaN(a) || isNaN(b)) {
             document.getElementById('valore').innerHTML="ERROR: devi inserire valori numerici";
         } else {
             document.getElementById('valore').innerHTML=result;
         }     
     }

        const addUlLI = () => window.addItem();
        const removeUlLI = () => window.removeItem();
        const addImg = () => window.addImg();
        const removeImg = () => window.removeImg();
        const cerca = () => window.cercaF();

    </script>

    <div class="container">
        <h1>Utility</h1>
        <div class="mb-3">
            <label for="a" class="form-label">Primo valore</label>
            <input id="a" class="form-control">
        </div>
        <div class="mb-3">
            <label for="b" class="form-label">Secondo valore</label>  
            <input id="b" class="form-control">
        </div>
        <button onclick="calcolasom()" class="btn btn-primary mb-3">Somma</button>
        <button onclick="calcoladif()" class="btn btn-primary mb-3">Differenza</button>
        <button onclick="calcolamolt()" class="btn btn-primary mb-3">Moltiplicazione</button>
        <button onclick="calcoladiv()" class="btn btn-primary mb-3">Divisione</button>
        <button onclick="addUlLI()" class="btn btn-primary mb-3">Aggiungi Elemento</button>
        <button onclick="window.removeItem()" class="btn btn-primary mb-3">Rimuovi Elemento</button>
        <button onclick="window.addImg()" class="btn btn-primary mb-3">Aggiungi Immagine</button>
        <button onclick="window.removeImg()" class="btn btn-primary mb-3">Rimuovi Immagine</button>
        <button onclick="window.cercaF()" class="btn btn-primary mb-3">Cerca Film</button>
        <div class="alert alert-success" role="alert">
            Risultato: <span id="valore" style="font-weight: bold;"></span>
        </div>
        <ul id="myList">
        
        </ul>
        <div id="myImg" class="img-container">   
            
        </div>
        <div id="main" class="img-container">   
            
        </div>
         </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
        crossorigin="anonymous"></script>
</body>

</html>